<launch>
  <arg name = "destination" default = "192.168.0.1" />
  <arg name = "port_send" default = "54650" />
  <arg name = "port_receive" default = "54630" /> 
  <arg name = "direct_control_flag" default = "false" />
  <arg name = "use_low_pass_filter" default = "true" />
  <arg name = "use_median_filter" default = "true" />
  <arg name = "lowpass_filter_cutoff_frequency_wr" default = "50" />
  <arg name = "lowpass_filter_cutoff_frequency_wl" default = "50" />
  <arg name = "lowpass_filter_sampling_frequency_wr" default = "100" />
  <arg name = "lowpass_filter_sampling_frequency_wl" default = "100" />
  <arg name = "lowpass_filter_size_wr" default = "20" />
  <arg name = "lowpass_filter_size_wl" default = "20" />
  <arg name = "median_filter_size_wr" default = "5" />
  <arg name = "median_filter_size_wl" default = "5" />
  <arg name = "encoder_pulse_resolution" default = "1" />
  
  <arg name = "plc_errormsg_topic" default = "/plc_errormsg" />
  <arg name = "waittime" default = "3" />
  <arg name = "receive_error_threshold" default = "1.0" />

  <arg name = "coms" default = "green" />

  <arg name = "twist_cmd_topic" default = "/twist_cmd" />
  <arg name = "accel_cmd_topic" default = "/accel_cmd" />
  <arg name = "steer_cmd_topic" default = "/steer_cmd" />
  <arg name = "lamp_cmd_topic" default = "/lamp_cmd" />
  <arg name = "indicator_cmd_topic" default = "/indicator_cmd" />
  <arg name = "gear_cmd_topic" default = "/gear_cmd" />
  <arg name = "mode_cmd_topic" default = "/mode_cmd" />

  <node pkg="udp_converter" type="plc_converter" name ="plc_converter" output="screen">
    <param name = "direct_control_flag" value = "$(arg direct_control_flag)" />

    <param name = "use_low_pass_filter" value = "$(arg use_low_pass_filter)" />
    <param name = "use_median_filter" value = "$(arg use_median_filter)" />

    <param name = "lowpass_filter_cutoff_frequency_wr" value = "$(arg lowpass_filter_cutoff_frequency_wr)" />
    <param name = "lowpass_filter_cutoff_frequency_wl" value = "$(arg lowpass_filter_cutoff_frequency_wl)" />
    <param name = "lowpass_filter_sampling_frequency_wr" value = "$(arg lowpass_filter_sampling_frequency_wr)" />
    <param name = "lowpass_filter_sampling_frequency_wl" value = "$(arg lowpass_filter_sampling_frequency_wl)" />
    <param name = "lowpass_filter_size_wr" value = "$(arg lowpass_filter_size_wr)" />
    <param name = "lowpass_filter_size_wl" value = "$(arg lowpass_filter_size_wl)" />
    <param name = "median_filter_size_wr" value = "$(arg median_filter_size_wr)" />
    <param name = "median_filter_size_wl" value = "$(arg median_filter_size_wl)" />

    <param name = "encoder_pulse_resolution" value = "$(arg encoder_pulse_resolution)" />

    <param name = "twist_cmd_topic" value = "$(arg twist_cmd_topic)" />
    <param name = "accel_cmd_topic" value = "$(arg accel_cmd_topic)" />
    <param name = "steer_cmd_topic" value = "$(arg steer_cmd_topic)" />
    <param name = "lamp_cmd_topic" value = "$(arg lamp_cmd_topic)" />
    <param name = "indicator_cmd_topic" value = "$(arg indicator_cmd_topic)" />
    <param name = "gear_cmd_topic" value = "$(arg gear_cmd_topic)" />
    <param name = "mode_cmd_topic" value = "$(arg mode_cmd_topic)" />
    <param name = "plc_errormsg_topic" value = "$(arg plc_errormsg_topic)" />

    <param name = "coms" value = "$(arg coms)" />
    <param name = "waittime" value = "$(arg waittime)" />
    <param name = "receive_error_threshold" value = "$(arg receive_error_threshold)" />
  </node>
  
  <node pkg = "udp_connector" type = "plc_sender" name = "plc_sender">
    <param name = "destination" value = "$(arg destination)" />
    <param name = "port_send" value = "$(arg port_send)" />
  </node>

  <node pkg = "udp_connector" type = "plc_receiver" name = "plc_receiver">
    <param name = "port_receive" value = "$(arg port_receive)" />
    <param name = "coms" value = "$(arg coms)" />
  </node>
</launch>

